<tr>
  <th>Adresse</th>
  <td>
      <input type="text" name="address" id="address" value="{{ map.address }}" /> 
      <input type="button" value="Geocode" onclick="codeAddress();"/> <span id="map-message" style="color: #faa;"></span>
  </td>
</tr>
<tr>
  <td colspan="2">
    <div id="map" style="width:520px; height:150px; margin-left: 162px;"></div>
    <script type="text/javascript">
        function initialize() {
	  geocoder = new google.maps.Geocoder();
	  map_selector_init('{{ map.map_lat }}', '{{ map.map_lon }}');
	}

    	function loadScript() {
    	  var script = document.createElement("script");
    	  script.type = "text/javascript";
    	  script.src = "http://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize";
    	  document.body.appendChild(script);
    	}
    	  
    	loadScript();

        $(function()
            {
               var  address = $('#address');
                var code = null;
                address.keypress(function(e)
                {
                    code= (e.keyCode ? e.keyCode : e.which);
                    if (code == 13) {
	              codeAddress();
                      e.preventDefault();
	            }
                });        
            });
    </script>

  </td>
</tr>
{{ form.as_table }}
